<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ordinary Travel Co.</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="container">
        <header>
            <img class="logo" src="images/logo.png" alt="Ordinary Travel Logo">
            <h1>ORDINARY TRAVEL</h1>
            <p class="tagline">// We will get you there</p>
            <nav class="nav-bar">
                <a href="./index.html">Home</a>
                <a href="./flight_itinerary.html">Flight Itinerary</a>
                <a href="./hotel_reservation.html">Hotel Reservation</a>
                <a href="./contact.html">Contact</a>
            </nav>
        </header>

        <section class="content-section">
            <h2>Flight Itinerary</h2>
            <p>Fill out the form below to request a flight itinerary for your visa application. We'll get back to you as
                soon as possible.</p>
        </section>

        <div class="form-card">
            <form id="form" method="POST">
                <div class="form-group">
                    <input type="hidden" name="subject"
                        value="New flight itinenary reservation has been requested.">
                    <input type="hidden" name="access_key" value="c5cd7840-7f6f-4040-8d70-a59dfe508687">
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="tripType" value="oneway">
                            One Way
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="tripType" value="roundtrip" checked>
                            Round Trip
                        </label>
                    </div>
                </div>

                <div class="form-row">
                    <div>
                        <label>Departure Airport *</label>
                        <input name="departure_airport" type="text" id="departure"
                            placeholder="Enter departure airport or city" required>
                    </div>
                    <div>
                        <label>Arrival Airport *</label>
                        <input name="arrival_airport" type="text" id="arrival"
                            placeholder="Enter arrival airport or city" required>
                    </div>
                </div>

                <div class="form-row">
                    <div>
                        <label>Departure Date *</label>
                        <input name="departure_date" type="date" id="departureDate" required>
                    </div>
                    <div id="return_date">
                        <label>Return Date</label>
                        <input name="return_date" type="date" id="returnDate">
                    </div>
                </div>

                <div class="form-group">
                    <label>Number of Passengers *</label>
                    <select name="passengers" id="passengers" required>
                        <option value="1">1 Passenger</option>
                        <option value="2">2 Passengers</option>
                        <option value="3">3 Passengers</option>
                        <option value="4">4 Passengers</option>
                        <option value="5">5 Passengers</option>
                    </select>
                </div>

                <div id="passengerFields">
                    <div class="passenger-entry">
                        <h3 class="passenger-title">Passenger 1</h3>
                        <div class="form-row">
                            <div>
                                <label>First Name *</label>
                                <input name="passenger_name" type="text" class="firstName" placeholder="First name"
                                    required>
                            </div>
                            <div>
                                <label>Surname *</label>
                                <input name="passenger_surname" type="text" class="surname" placeholder="Surname"
                                    required>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Additional Notes</label>
                    <textarea name="notes" id="notes" placeholder="Any special requests or preferences"></textarea>
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input name="email" type="email" id="email" placeholder="Enter your email">
                </div>

                <div class="form-group">
                    <label>Phone Number *</label>
                    <input name="phone_number" type="text" id="number" placeholder="Enter a phone number" required>
                </div>

                <div class="form-group">
                    <label>Please check all the details before submitting your request.</label>
                    <input style="display: none" name="reference" type="text" id="reference">
                </div>

                <button type="submit" class="submit-btn">
                    Submit Request
                </button>
            </form>
        </div>

        <div class="price-section">
            <h2>Service Pricing</h2>
            <div class="price-item">
                <span class="price-label">Flight Itinerary Service</span>
                <span class="price-amount">10,000 IQD</span>
            </div>
            <div class="price-note">
                ðŸ’¡ This fee covers our professional itinerary preparation service. Once you submit your request, we'll
                get back to you as soon as possible and provide you with an pdf itinerary that you could use for your
                visa application.
            </div>
            <div class="price-note">
                ðŸ’¡ This itinerary is not verificable, and can only be used for visa applications.
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h2>ORDINARY TRAVEL</h2>
                </div>

                <div class="footer-links">
                    <a href="mailto:hello@ordinary.krd" class="footer-link">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z">
                            </path>
                            <polyline points="22,6 12,13 2,6"></polyline>
                        </svg>
                        hello@ordinary.krd
                    </a>

                    <a href="tel:+9647505522909" class="footer-link">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path
                                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                            </path>
                        </svg>
                        +964-750-552-2909
                    </a>

                    <a href="tel:+9647704472909" class="footer-link">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path
                                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                            </path>
                        </svg>
                        +964-770-447-2909
                    </a>
                </div>

                <div class="social-links">
                    <a href="https://facebook.com/ordinarytravelco" target="_blank" class="social-link" aria-label="Facebook">
                        <svg class="social-icon" viewBox="0 0 24 24">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg>
                    </a>

                    <a href="https://instagram.com/ordinarytravelco" target="_blank" class="social-link" aria-label="Instagram">
                        <svg class="social-icon" viewBox="0 0 24 24" fill="none">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5" stroke="currentColor"
                                stroke-width="2"></rect>
                            <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"></circle>
                            <circle cx="17.5" cy="6.5" r="0.5" fill="currentColor" stroke="currentColor"
                                stroke-width="1"></circle>
                        </svg>
                    </a>

                    <a href="https://wa.me/+9647505522909" target="_blank" class="social-link" aria-label="WhatsApp">
                        <svg class="social-icon" viewBox="0 0 24 24">
                            <path
                                d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                            </path>
                        </svg>
                    </a>
                </div>

                <div class="footer-bottom">
                    <p>Â© 2024 Ordinary Travel Co. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Dialog Overlay -->
    <div class="dialog-overlay" id="dialogOverlay">
        <div class="dialog-box">
            <h3 id="dialog_title"></h3>
            <p id="dialog_message"></p>
            <button class="dialog-button" onclick="closeDialog()">Close</button>
        </div>
    </div>

    <script>
        // Handle trip type changes
        document.querySelectorAll('input[name="tripType"]').forEach(radio => {
            radio.addEventListener('change', function () {
                const rt = document.getElementById("return_date");
                const returnDateField = document.getElementById('returnDate');
                if (this.value === 'oneway') {
                    returnDateField.required = false;
                    rt.style.display = "none";
                } else {
                    returnDateField.required = true;
                    rt.style.display = "block";
                }
            });
        });

        // Handle passenger count changes
        document.getElementById('passengers').addEventListener('change', function () {
            const count = parseInt(this.value);
            const container = document.getElementById('passengerFields');
            container.innerHTML = '';

            for (let i = 1; i <= count; i++) {
                const passengerDiv = document.createElement('div');
                passengerDiv.className = 'passenger-entry';
                passengerDiv.innerHTML = `
                    <h3 class="passenger-title">Passenger ${i}</h3>
                    <div class="form-row">
                        <div>
                            <label>First Name *</label>
                            <input name="${i}_passenger_name" type="text" class="firstName" placeholder="First name" required>
                        </div>
                        <div>
                            <label>Surname *</label>
                            <input name="${i}_passenger_surname" type="text" class="surname" placeholder="Surname" required>
                        </div>
                    </div>
                `;
                container.appendChild(passengerDiv);
            }
        });

        let reference = Math.floor((Math.random() * 999999) + 1);
        document.getElementById('reference').value = 'F' + reference;
        // Dialog functions
        function showDialog(title, message) {
            document.getElementById('dialog_title').innerText = title;
            document.getElementById('dialog_message').innerText = message;
            document.getElementById('dialogOverlay').classList.add('active');
        }

        function closeDialog() {
            document.getElementById('dialogOverlay').classList.remove('active');
        }

        // Close dialog when clicking outside the dialog box
        document.getElementById('dialogOverlay').addEventListener('click', function (e) {
            if (e.target === this) {
                closeDialog();
            }
        });

        const form = document.getElementById('form');

        form.addEventListener('submit', function (e) {
            e.preventDefault();
            const formData = new FormData(form);
            const object = Object.fromEntries(formData);
            const json = JSON.stringify(object);

            fetch('https://api.web3forms.com/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: json
            })
                .then(async (response) => {
                    let json = await response.json();
                    if (response.status == 200) {
                        showDialog("Request Sent", "We have successfully received your request, and we will get back to you the soonest. Please keep this reference number: F" + reference);
                    } else {
                        console.log(response);
                        showDialog("Erorr", json.message);
                    }
                })
                .catch(error => {
                    console.log(error);
                    showDialog("Error", error);
                })
                .then(function () {
                    form.reset();

                    document.getElementById('passengers').value = '1';
                    // Regenerate passenger fields for 1 passenger
                    const container = document.getElementById('passengerFields');
                    container.innerHTML = `
                <div class="passenger-entry">
                    <h3 class="passenger-title">Passenger 1</h3>
                    <div class="form-row">
                        <div>
                            <label>First Name *</label>
                            <input name="1_passenger_name" type="text" class="firstName" placeholder="First name" required>
                        </div>
                        <div>
                            <label>Surname *</label>
                            <input name="1_passenger_surname" type="text" class="surname" placeholder="Surname" required>
                        </div>
                    </div>
                </div>
            `;
                    // Generate new reference number
                    reference = Math.floor((Math.random() * 999999) + 1);
                    document.getElementById('reference').value = 'F' + reference;



                });
        });
    </script>
</body>

</html>
